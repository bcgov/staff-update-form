{"ast":null,"code":"import jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nexport async function generatePDF() {\n  const formElement = document.getElementById('form-to-pdf');\n  if (!formElement) {\n    console.error('generatePDF error: form element not found');\n    return;\n  }\n  const canvas = await html2canvas(formElement, {\n    scale: window.devicePixelRatio ? window.devicePixelRatio * 1.5 : 2,\n    useCORS: true,\n    letterRendering: true,\n    onclone: clonedDoc => {\n      const clonedForm = clonedDoc.getElementById('form-to-pdf');\n      if (!clonedForm) return;\n\n      // add our print‑form tweaks\n      clonedForm.classList.add('print-form');\n\n      // for each textarea, bump its rows to fit its content\n      clonedForm.querySelectorAll('textarea').forEach(ta => {\n        // count how many lines the user actually typed\n        const lineCount = ta.value.split(/\\r\\n|\\n|\\r/).length;\n        // make sure it's at least the original rows (if you want a minimum)\n        const minRows = parseInt(ta.getAttribute('rows') || '4', 10);\n        ta.setAttribute('rows', Math.max(lineCount, minRows));\n      });\n    }\n  });\n  const imgData = canvas.toDataURL('image/png');\n  const pdf = new jsPDF('p', 'mm', 'a4');\n  const pdfWidth = pdf.internal.pageSize.getWidth();\n  const pdfHeight = canvas.height * pdfWidth / canvas.width;\n  pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);\n  pdf.save('form.pdf');\n}","map":{"version":3,"names":["jsPDF","html2canvas","generatePDF","formElement","document","getElementById","console","error","canvas","scale","window","devicePixelRatio","useCORS","letterRendering","onclone","clonedDoc","clonedForm","classList","add","querySelectorAll","forEach","ta","lineCount","value","split","length","minRows","parseInt","getAttribute","setAttribute","Math","max","imgData","toDataURL","pdf","pdfWidth","internal","pageSize","getWidth","pdfHeight","height","width","addImage","save"],"sources":["C:/development/staff-update-form/client/src/pdfGenerator.js"],"sourcesContent":["import jsPDF from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\n\r\nexport async function generatePDF() {\r\n  const formElement = document.getElementById('form-to-pdf');\r\n  if (!formElement) {\r\n    console.error('generatePDF error: form element not found');\r\n    return;\r\n  }\r\n\r\n  const canvas = await html2canvas(formElement, {\r\n    scale: window.devicePixelRatio ? window.devicePixelRatio * 1.5 : 2,\r\n    useCORS: true,\r\n    letterRendering: true,\r\n    onclone: (clonedDoc) => {\r\n      const clonedForm = clonedDoc.getElementById('form-to-pdf');\r\n      if (!clonedForm) return;\r\n\r\n      // add our print‑form tweaks\r\n      clonedForm.classList.add('print-form');\r\n\r\n      // for each textarea, bump its rows to fit its content\r\n      clonedForm.querySelectorAll('textarea').forEach((ta) => {\r\n        // count how many lines the user actually typed\r\n        const lineCount = ta.value.split(/\\r\\n|\\n|\\r/).length;\r\n        // make sure it's at least the original rows (if you want a minimum)\r\n        const minRows = parseInt(ta.getAttribute('rows') || '4', 10);\r\n        ta.setAttribute('rows', Math.max(lineCount, minRows));\r\n      });\r\n    }\r\n  });\r\n\r\n  const imgData = canvas.toDataURL('image/png');\r\n  const pdf = new jsPDF('p', 'mm', 'a4');\r\n  const pdfWidth = pdf.internal.pageSize.getWidth();\r\n  const pdfHeight = (canvas.height * pdfWidth) / canvas.width;\r\n  pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);\r\n  pdf.save('form.pdf');\r\n}\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,aAAa;AAErC,OAAO,eAAeC,WAAWA,CAAA,EAAG;EAClC,MAAMC,WAAW,GAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC;EAC1D,IAAI,CAACF,WAAW,EAAE;IAChBG,OAAO,CAACC,KAAK,CAAC,2CAA2C,CAAC;IAC1D;EACF;EAEA,MAAMC,MAAM,GAAG,MAAMP,WAAW,CAACE,WAAW,EAAE;IAC5CM,KAAK,EAAEC,MAAM,CAACC,gBAAgB,GAAGD,MAAM,CAACC,gBAAgB,GAAG,GAAG,GAAG,CAAC;IAClEC,OAAO,EAAE,IAAI;IACbC,eAAe,EAAE,IAAI;IACrBC,OAAO,EAAGC,SAAS,IAAK;MACtB,MAAMC,UAAU,GAAGD,SAAS,CAACV,cAAc,CAAC,aAAa,CAAC;MAC1D,IAAI,CAACW,UAAU,EAAE;;MAEjB;MACAA,UAAU,CAACC,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;;MAEtC;MACAF,UAAU,CAACG,gBAAgB,CAAC,UAAU,CAAC,CAACC,OAAO,CAAEC,EAAE,IAAK;QACtD;QACA,MAAMC,SAAS,GAAGD,EAAE,CAACE,KAAK,CAACC,KAAK,CAAC,YAAY,CAAC,CAACC,MAAM;QACrD;QACA,MAAMC,OAAO,GAAGC,QAAQ,CAACN,EAAE,CAACO,YAAY,CAAC,MAAM,CAAC,IAAI,GAAG,EAAE,EAAE,CAAC;QAC5DP,EAAE,CAACQ,YAAY,CAAC,MAAM,EAAEC,IAAI,CAACC,GAAG,CAACT,SAAS,EAAEI,OAAO,CAAC,CAAC;MACvD,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;EAEF,MAAMM,OAAO,GAAGxB,MAAM,CAACyB,SAAS,CAAC,WAAW,CAAC;EAC7C,MAAMC,GAAG,GAAG,IAAIlC,KAAK,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC;EACtC,MAAMmC,QAAQ,GAAGD,GAAG,CAACE,QAAQ,CAACC,QAAQ,CAACC,QAAQ,CAAC,CAAC;EACjD,MAAMC,SAAS,GAAI/B,MAAM,CAACgC,MAAM,GAAGL,QAAQ,GAAI3B,MAAM,CAACiC,KAAK;EAC3DP,GAAG,CAACQ,QAAQ,CAACV,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,EAAEG,QAAQ,EAAEI,SAAS,CAAC;EACvDL,GAAG,CAACS,IAAI,CAAC,UAAU,CAAC;AACtB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}